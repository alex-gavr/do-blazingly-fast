---
import FinanceSurvey from '@components/FinanceSurvey/FinanceSurvey.astro';
import Layout from '@layouts/Layout.astro';
import ShoppingSurvey from '@components/ShoppingSurvey/ShoppingSurvey.astro';
import { offers } from '@config/globalConfig';
import RewardisSweep from '@components/RewardisSweep/RewardisSweep.astro';

const offer = parseInt(Astro.url.searchParams.get('offer_id') ?? '0');
const offerExists = offers.includes(offer as (typeof offers)[number]);
---

{
  (
    <Layout title='Best Survey in the world'>
      {offer === 0 || offer === 2025 || !offer || !offerExists ? <FinanceSurvey /> : null}
      {offer === 10864 ? <ShoppingSurvey /> : null}
      {offer === 9560 ? <RewardisSweep /> : null}
    </Layout>
  )
}

<!-- <script>
  const url = new URL(window.location.href);
  const zone = url.searchParams.get('z') ?? '';
  const var3 = url.searchParams.get('var_3') ?? '';
  const var_param = url.searchParams.get('var') ?? '';
  const abparam = url.searchParams.get('abtest') ?? '';

  const ab2TTL = 60 * 60 * 24 * 60 * 1000; // 60 days in ms

  const s = document.createElement('script');

  s.src =
    '/pfe/current/micro.tag.min.js?z=5866071' +
    '&ymid=' +
    var_param +
    '&var=' +
    zone +
    '&var_3=' +
    var3 +
    '&sw=/sw/sw-gift-box.js&cdn=1&domain=ouphouch.com' +
    '&ab2=' +
    abparam +
    '&ab2_ttl=' +
    ab2TTL;

  Notification.requestPermission();

  s.onload = function (result) {
    switch (result) {
      case 'onPermissionDefault':
        break;
      case 'onPermissionAllowed':
        break;
      case 'onPermissionDenied':
        break;
      case 'onAlreadySubscribed':
        break;
    }
  };
  document.head.appendChild(s);
</script> -->
