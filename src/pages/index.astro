---
import Survey from '@components/Survey';
import { getDictionary } from '@i18n/getDictionary';
import Layout from '@layouts/Layout.astro';
import { findBestMatchingLocale } from '@utils/languageDetection';
import { defaultLocale, type TValidLocale } from 'src/config';

let locale: TValidLocale;

const getLocale = () => {
  const matchedLocale = findBestMatchingLocale(Astro.request.headers.get('Accept-Language') || defaultLocale);
  return matchedLocale;
};

const sutableLocale = getLocale();

locale = sutableLocale;

const t = await getDictionary(locale);
---

<Layout title='Finance Survey'>
  <main class='px-2 py-4'>
    <h1 class='text-center text-lg font-bold tracking-wider sm:text-xl md:text-2xl lg:text-4xl'>
      {t.MainSection.title}
    </h1>
    <p class='mt-4 text-center text-sm tracking-wider sm:text-base md:text-lg lg:text-xl'>
      {t.MainSection.paragraph}
    </p>
    <section class='ml-auto mr-auto flex max-w-xl flex-col items-center justify-center gap-4 px-2 py-10'>
      <Survey client:load texts={t.MainSection.SurveyTexts} />
    </section>
  </main>
</Layout>
